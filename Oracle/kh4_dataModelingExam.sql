/*
다음은 IT 전문 학원에 대한 정보이다. 
교육센터는 IT 전문 학원으로 다양한 과정을 개설하고 있다. 
각 과정은 코드, 과정 명 및 수강료를 갖고 있다. 과정들은 1개월에서 6개월 등 기간은 다양하다. 
각 강사에 대해 이름과 전화번호를 필요로 하며 한 강사는 여러 개의 과정을 수업할 수 있다. 
학생들은 여러 개의 과정을 수강신청 할 수 있는데 많은 학생들이 이렇게 하고 있다. 
학생 관리 차원에서 각 학생들의 이름과 전화번호를 기록한다. ?
*/
CREATE TABLE STUDENT(
    STUDENT_NO      NUMBER      PRIMARY KEY,
    STUDENT_NAME    VARCHAR2(20) NOT NULL,
    STUDENT_PHONE   CHAR(13)    NOT NULL
);
CREATE TABLE TEACHER(
    TEACHER_NO      NUMBER      PRIMARY KEY,
    TEACHER_NAME    VARCHAR2(20) NOT NULL,
    TEACHER_PHONE   CHAR(13)    NOT NULL
);
CREATE TABLE ACADEMY(
    CLASS_CODE  NUMBER PRIMARY KEY,
    CLASS_NAME  VARCHAR2(50) UNIQUE NOT NULL,
    CLASS_PAY   NUMBER  NOT NULL,
    CLASS_DAYS  DATE,
    TEACHER_NO  NUMBER REFERENCES TEACHER ON DELETE CASCADE
);
CREATE TABLE APP_CLASS(
    CLASS_CODE  NUMBER REFERENCES ACADEMY ON DELETE CASCADE,
    STUDENT_NO  NUMBER REFERENCES STUDENT ON DELETE CASCADE
);
--테이블 확인
SELECT * FROM STUDENT;
SELECT * FROM TEACHER;
SELECT * FROM ACADEMY;
SELECT * FROM APP_CLASS;

--각 테이블 데이터 삽입
INSERT INTO STUDENT VALUES(1,'학생1','01011111111');
INSERT INTO STUDENT VALUES(2,'학생2','01022222222');
INSERT INTO STUDENT VALUES(3,'학생3','01033333333');

INSERT INTO TEACHER VALUES(1,'선생1','010444444444');
INSERT INTO TEACHER VALUES(2,'선생2','010555555555');
INSERT INTO TEACHER VALUES(3,'선생3','010666666666');

INSERT INTO ACADEMY VALUES(1,'수업1','100000',SYSDATE,1);
INSERT INTO ACADEMY VALUES(2,'수업2','500000',SYSDATE,2);
INSERT INTO ACADEMY VALUES(3,'수업3','700000',SYSDATE,3);
INSERT INTO ACADEMY VALUES(4,'수업4','800000',SYSDATE,2);

INSERT INTO APP_CLASS VALUES(1,3);
INSERT INTO APP_CLASS VALUES(1,2);
INSERT INTO APP_CLASS VALUES(2,1);

--APP_CLASS를 사용해서 학생명, 강사명 수업명 추출.
SELECT CLASS_CODE, STUDENT_NO, CLASS_NAME, TEACHER_NAME
FROM APP_CLASS
JOIN ACADEMY A USING (CLASS_CODE)
JOIN STUDENT USING (STUDENT_NO)
JOIN TEACHER T ON (A.TEACHER_NO=T.TEACHER_NO);

--강사 삭제 및 학생삭제 시도 및 결과 확인



















